{
  "id" : "com.github.davidmhewitt.torrential",
  "runtime" : "io.elementary.Platform",
  "runtime-version" : "7.2",
  "sdk" : "io.elementary.Sdk",
  "command" : "com.github.davidmhewitt.torrential",
  "modules" : [
    {
      "name" : "libevent",
      "buildsystem" : "autotools",
      "sources" : [
        {
          "url" : "https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz",
          "sha256" : "92e6de1be9ec176428fd2367677e61ceffc2ee1cb119035037a27d346b0403bb",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "transmission",
      "buildsystem" : "cmake",
      "builddir" : true,
      "config-opts" : [
        "-DENABLE_TESTS=OFF",
        "-DENABLE_GTK=OFF",
        "-DINSTALL_DOC=OFF",
        "-DENABLE_DAEMON=OFF",
        "-DENABLE_UTILS=OFF",
        "-DINSTALL_LIB=ON"
      ],
      "sources" : [
        {
          "url" : "https://github.com/transmission/transmission/releases/download/3.00/transmission-3.00.tar.xz",
          "sha256" : "9144652fe742f7f7dd6657716e378da60b751aaeda8bef8344b3eefc4db255f2",
          "type" : "archive"
        },
        {
          "path" : "transmission-legacy-ssl.patch",
          "type" : "patch"
        }
      ],
      "post-install" : [
        "cp third-party/dht/lib/libdht.a /app/lib/",
        "cp third-party/b64/lib/libb64.a /app/lib/",
        "cp third-party/miniupnpc/lib/libminiupnpc.a /app/lib/",
        "cp third-party/natpmp/lib/libnatpmp.a /app/lib/",
        "cp third-party/utp/lib/libutp.a /app/lib/"
      ]
    },
    {
      "name": "stylesheet",
      "buildsystem": "meson",
      "sources": [
          {
              "type": "git",
              "url": "https://github.com/elementary/stylesheet.git",
              "branch": "windows-mutter44"
          }
      ],
      "modules": [
          {
              "name": "sassc",
              "cleanup": [ "*" ],
              "sources": [
                  {
                      "type": "git",
                      "url": "https://github.com/sass/sassc.git",
                      "tag": "3.6.2"
                  },
                  {
                      "type": "script",
                      "dest-filename": "autogen.sh",
                      "commands": [ "autoreconf -si" ]
                  }
              ],
              "modules": [
                  {
                      "name": "libsass",
                      "cleanup": [ "*" ],
                      "sources": [
                          {
                              "type": "git",
                              "url": "https://github.com/sass/libsass.git",
                              "tag": "3.6.5"
                          },
                          {
                              "type": "script",
                              "dest-filename": "autogen.sh",
                              "commands": [ "autoreconf -si" ]
                          }
                      ]
                  }
              ]
          }
      ]
    },
    {
      "name" : "torrential",
      "buildsystem" : "meson",
      "builddir" : true,
      "sources" : [
        {
          "path" : ".",
          "type" : "dir"
        }
      ]
    }
  ],
  "cleanup" : [
    "*.a",
    "*.la",
    "/include"
  ],
  "finish-args" : [
    "--share=ipc",
    "--socket=fallback-x11",
    "--socket=wayland",
    "--share=network",
    "--filesystem=xdg-download",
    "--talk-name=org.freedesktop.FileManager1"
  ]
}
